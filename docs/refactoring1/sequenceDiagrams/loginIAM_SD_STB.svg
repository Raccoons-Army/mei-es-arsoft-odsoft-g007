<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1458px" preserveAspectRatio="none" style="width:2622px;height:1458px;background:#FFFFFF;" version="1.1" viewBox="0 0 2622 1458" width="2622px" zoomAndPan="magnify"><title>IAM Authentication with Google and Facebook (External Callback)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="439.4961" x="1087.5979" y="30.1074">IAM Authentication with Google and Facebook (External Callback)</text><rect fill="#FFFFFF" height="1233.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="39.9653" y="133.2422"/><rect fill="#FFFFFF" height="312.9102" style="stroke:#181818;stroke-width:1.0;" width="10" x="289.0396" y="201.8242"/><rect fill="#FFFFFF" height="250.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="444.854" y="233.1152"/><rect fill="#FFFFFF" height="703.7422" style="stroke:#181818;stroke-width:1.0;" width="10" x="444.854" y="622.6074"/><rect fill="#FFFFFF" height="187.7461" style="stroke:#181818;stroke-width:1.0;" width="10" x="727.1899" y="264.4063"/><rect fill="#FFFFFF" height="712.7422" style="stroke:#181818;stroke-width:1.0;" width="10" x="727.1899" y="653.8984"/><rect fill="#FFFFFF" height="484.7051" style="stroke:#181818;stroke-width:1.0;" width="10" x="732.1899" y="810.3535"/><rect fill="#FFFFFF" height="1070.9434" style="stroke:#181818;stroke-width:1.0;" width="10" x="982.7178" y="295.6973"/><rect fill="#FFFFFF" height="681.4512" style="stroke:#181818;stroke-width:1.0;" width="10" x="987.7178" y="685.1895"/><rect fill="#FFFFFF" height="93.873" style="stroke:#181818;stroke-width:1.0;" width="10" x="1405.189" y="326.9883"/><rect fill="#FFFFFF" height="650.1602" style="stroke:#181818;stroke-width:1.0;" width="10" x="1405.189" y="716.4805"/><rect fill="#FFFFFF" height="93.873" style="stroke:#181818;stroke-width:1.0;" width="10" x="1410.189" y="841.6445"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2059.4277" y="358.2793"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2059.4277" y="747.7715"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2059.4277" y="872.9355"/><rect fill="#FFFFFF" height="775.3242" style="stroke:#181818;stroke-width:1.0;" width="10" x="2236.6099" y="591.3164"/><rect fill="#FFFFFF" height="57.582" style="stroke:#181818;stroke-width:1.0;" width="10" x="2411.4473" y="1012.0996"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2411.4473" y="1117.6035"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2562.9092" y="1232.4766"/><rect fill="none" height="129.7949" style="stroke:#000000;stroke-width:1.5;" width="1824.0845" x="647.4834" y="1027.0996"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="44" x2="44" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="293.7568" x2="293.7568" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="449.1094" x2="449.1094" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="731.4834" x2="731.4834" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="987.6836" x2="987.6836" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1409.2412" x2="1409.2412" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2063.9624" x2="2063.9624" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2240.8931" x2="2240.8931" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2416.3267" x2="2416.3267" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2492.5679" x2="2492.5679" y1="123.2422" y2="1375.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2567.1265" x2="2567.1265" y1="123.2422" y2="1375.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.9307" x="5" y="119.7285">Anonymous</text><ellipse cx="44.9653" cy="53.1211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M44.9653,61.1211 L44.9653,88.1211 M31.9653,69.1211 L57.9653,69.1211 M44.9653,88.1211 L31.9653,103.1211 M44.9653,88.1211 L57.9653,103.1211 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.9307" x="5" y="1389.748">Anonymous</text><ellipse cx="44.9653" cy="1401.7617" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M44.9653,1409.7617 L44.9653,1436.7617 M31.9653,1417.7617 L57.9653,1417.7617 M44.9653,1436.7617 L31.9653,1451.7617 M44.9653,1436.7617 L57.9653,1451.7617 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.5654" x="261.7568" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.5654" x="268.7568" y="111.7285">:System</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64.5654" x="261.7568" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50.5654" x="268.7568" y="1396.748">:System</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.4893" x="398.1094" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.4893" x="405.1094" y="111.7285">AuthController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.4893" x="398.1094" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.4893" x="405.1094" y="1396.748">AuthController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.4131" x="657.4834" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.4131" x="664.4834" y="111.7285">AuthenticationService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.4131" x="657.4834" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.4131" x="664.4834" y="1396.748">AuthenticationService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.0684" x="924.6836" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.0684" x="931.6836" y="111.7285">IamAuthentication</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.0684" x="924.6836" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.0684" x="931.6836" y="1396.748">IamAuthentication</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189.8955" x="1315.2412" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175.8955" x="1322.2412" y="111.7285">GoogleAuth / FacebookAuth</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189.8955" x="1315.2412" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175.8955" x="1322.2412" y="1396.748">GoogleAuth / FacebookAuth</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.9307" x="2016.9624" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.9307" x="2023.9624" y="111.7285">OAuthHelper</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.9307" x="2016.9624" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.9307" x="2023.9624" y="1396.748">OAuthHelper</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233.4336" x="2121.8931" y="119.7285">External System (Google / Facebook)</text><ellipse cx="2241.6099" cy="53.1211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M2241.6099,61.1211 L2241.6099,88.1211 M2228.6099,69.1211 L2254.6099,69.1211 M2241.6099,88.1211 L2228.6099,103.1211 M2241.6099,88.1211 L2254.6099,103.1211 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233.4336" x="2121.8931" y="1389.748">External System (Google / Facebook)</text><ellipse cx="2241.6099" cy="1401.7617" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M2241.6099,1409.7617 L2241.6099,1436.7617 M2228.6099,1417.7617 L2254.6099,1417.7617 M2241.6099,1436.7617 L2228.6099,1451.7617 M2241.6099,1436.7617 L2254.6099,1451.7617 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.2412" x="2371.3267" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.2412" x="2378.3267" y="111.7285">UserService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.2412" x="2371.3267" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.2412" x="2378.3267" y="1396.748">UserService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43.5586" x="2471.5679" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="2478.5679" y="111.7285">User</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43.5586" x="2471.5679" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="2478.5679" y="1396.748">User</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85.5654" x="2525.1265" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.5654" x="2532.1265" y="111.7285">JWT Token</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85.5654" x="2525.1265" y="1374.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71.5654" x="2532.1265" y="1396.748">JWT Token</text><rect fill="#FFFFFF" height="1233.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="39.9653" y="133.2422"/><rect fill="#FFFFFF" height="312.9102" style="stroke:#181818;stroke-width:1.0;" width="10" x="289.0396" y="201.8242"/><rect fill="#FFFFFF" height="250.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="444.854" y="233.1152"/><rect fill="#FFFFFF" height="703.7422" style="stroke:#181818;stroke-width:1.0;" width="10" x="444.854" y="622.6074"/><rect fill="#FFFFFF" height="187.7461" style="stroke:#181818;stroke-width:1.0;" width="10" x="727.1899" y="264.4063"/><rect fill="#FFFFFF" height="712.7422" style="stroke:#181818;stroke-width:1.0;" width="10" x="727.1899" y="653.8984"/><rect fill="#FFFFFF" height="484.7051" style="stroke:#181818;stroke-width:1.0;" width="10" x="732.1899" y="810.3535"/><rect fill="#FFFFFF" height="1070.9434" style="stroke:#181818;stroke-width:1.0;" width="10" x="982.7178" y="295.6973"/><rect fill="#FFFFFF" height="681.4512" style="stroke:#181818;stroke-width:1.0;" width="10" x="987.7178" y="685.1895"/><rect fill="#FFFFFF" height="93.873" style="stroke:#181818;stroke-width:1.0;" width="10" x="1405.189" y="326.9883"/><rect fill="#FFFFFF" height="650.1602" style="stroke:#181818;stroke-width:1.0;" width="10" x="1405.189" y="716.4805"/><rect fill="#FFFFFF" height="93.873" style="stroke:#181818;stroke-width:1.0;" width="10" x="1410.189" y="841.6445"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2059.4277" y="358.2793"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2059.4277" y="747.7715"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2059.4277" y="872.9355"/><rect fill="#FFFFFF" height="775.3242" style="stroke:#181818;stroke-width:1.0;" width="10" x="2236.6099" y="591.3164"/><rect fill="#FFFFFF" height="57.582" style="stroke:#181818;stroke-width:1.0;" width="10" x="2411.4473" y="1012.0996"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2411.4473" y="1117.6035"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2562.9092" y="1232.4766"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2615.6919" x="0" y="154.8877"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2615.6919" y1="154.8877" y2="154.8877"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2615.6919" y1="157.8877" y2="157.8877"/><rect fill="#EEEEEE" height="25.291" style="stroke:#000000;stroke-width:2.0;" width="189.5381" x="1213.0769" y="143.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="171.9263" x="1219.0769" y="161.2705">Step 1: redirectToProvider()</text><polygon fill="#181818" points="277.0396,197.8242,287.0396,201.8242,277.0396,205.8242,281.0396,201.8242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49.9653" x2="283.0396" y1="201.8242" y2="201.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="56.9653" y="196.5615">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.8442" x="68.1953" y="196.5615">Initiates login with Google/Facebook</text><polygon fill="#181818" points="432.854,229.1152,442.854,233.1152,432.854,237.1152,436.854,233.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="299.0396" x2="438.854" y1="233.1152" y2="233.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="306.0396" y="227.8525">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.5845" x="317.2695" y="227.8525">redirectToProvider()</text><polygon fill="#181818" points="715.1899,260.4063,725.1899,264.4063,715.1899,268.4063,719.1899,264.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="454.854" x2="721.1899" y1="264.4063" y2="264.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="461.854" y="259.1436">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.2153" x="473.084" y="259.1436">getAuthorizationUrl()</text><polygon fill="#181818" points="970.7178,291.6973,980.7178,295.6973,970.7178,299.6973,974.7178,295.6973" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.1899" x2="976.7178" y1="295.6973" y2="295.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="744.1899" y="290.4346">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.2153" x="755.4199" y="290.4346">getAuthorizationUrl()</text><polygon fill="#181818" points="1393.189,322.9883,1403.189,326.9883,1393.189,330.9883,1397.189,326.9883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992.7178" x2="1399.189" y1="326.9883" y2="326.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="999.7178" y="321.7256">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286.1587" x="1010.9478" y="321.7256">GoogleAuth / FacebookAuth getAuthorizationUrl()</text><polygon fill="#181818" points="2047.4277,354.2793,2057.4277,358.2793,2047.4277,362.2793,2051.4277,358.2793" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1415.189" x2="2053.4277" y1="358.2793" y2="358.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="1422.189" y="353.0166">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="614.0088" x="1433.4189" y="353.0166">getAuthorizationUrl(authorizationUrl, authorizationUri, clientId, redirectUri, emailScope + " " + profileScope)</text><polygon fill="#181818" points="1426.189,385.5703,1416.189,389.5703,1426.189,393.5703,1422.189,389.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1420.189" x2="2063.4277" y1="389.5703" y2="389.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="1432.189" y="384.3076">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.0444" x="1443.4189" y="384.3076">authorizationUrl</text><polygon fill="#181818" points="748.1899,416.8613,738.1899,420.8613,748.1899,424.8613,744.1899,420.8613" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742.1899" x2="1409.189" y1="420.8613" y2="420.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="754.1899" y="415.5986">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.0444" x="765.4199" y="415.5986">authorizationUrl</text><polygon fill="#181818" points="465.854,448.1523,455.854,452.1523,465.854,456.1523,461.854,452.1523" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="459.854" x2="731.1899" y1="452.1523" y2="452.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7.23" x="471.854" y="446.8896">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.0444" x="483.084" y="446.8896">authorizationUrl</text><polygon fill="#181818" points="310.0396,479.4434,300.0396,483.4434,310.0396,487.4434,306.0396,483.4434" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="304.0396" x2="448.854" y1="483.4434" y2="483.4434"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="316.0396" y="478.1807">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.0444" x="334.4995" y="478.1807">authorizationUrl</text><polygon fill="#181818" points="60.9653,510.7344,50.9653,514.7344,60.9653,518.7344,56.9653,514.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54.9653" x2="293.0396" y1="514.7344" y2="514.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="66.9653" y="509.4717">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.0444" x="85.4253" y="509.4717">authorizationUrl</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2615.6919" x="0" y="544.3799"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2615.6919" y1="544.3799" y2="544.3799"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2615.6919" y1="547.3799" y2="547.3799"/><rect fill="#EEEEEE" height="25.291" style="stroke:#000000;stroke-width:2.0;" width="326.0444" x="1144.8237" y="532.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="308.4326" x="1150.8237" y="550.7627">Step 2: External Callback with Authorization Code</text><polygon fill="#181818" points="2224.6099,587.3164,2234.6099,591.3164,2224.6099,595.3164,2228.6099,591.3164" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49.9653" x2="2230.6099" y1="591.3164" y2="591.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="56.9653" y="586.0537">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3843" x="75.4253" y="586.0537">Logs in via Google/Facebook</text><polygon fill="#181818" points="465.854,618.6074,455.854,622.6074,465.854,626.6074,461.854,622.6074" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="459.854" x2="2235.6099" y1="622.6074" y2="622.6074"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="471.854" y="617.3447">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251.4751" x="490.314" y="617.3447">handleProviderCallback(authorizationCode)</text><polygon fill="#181818" points="715.1899,649.8984,725.1899,653.8984,715.1899,657.8984,719.1899,653.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="454.854" x2="721.1899" y1="653.8984" y2="653.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="461.854" y="648.6357">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.876" x="480.314" y="648.6357">handleLoginCallback(authorizationCode)</text><polygon fill="#181818" points="975.7178,681.1895,985.7178,685.1895,975.7178,689.1895,979.7178,685.1895" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.1899" x2="981.7178" y1="685.1895" y2="685.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="744.1899" y="679.9268">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.0679" x="762.6499" y="679.9268">handleCallback(authorizationCode)</text><polygon fill="#181818" points="1393.189,712.4805,1403.189,716.4805,1393.189,720.4805,1397.189,716.4805" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="997.7178" x2="1399.189" y1="716.4805" y2="716.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1004.7178" y="711.2178">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="370.0112" x="1023.1777" y="711.2178">GoogleAuth / FacebookAuth handleCallback(authorizationCode)</text><polygon fill="#181818" points="2047.4277,743.7715,2057.4277,747.7715,2047.4277,751.7715,2051.4277,747.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1415.189" x2="2053.4277" y1="747.7715" y2="747.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1422.189" y="742.5088">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="552.0303" x="1440.6489" y="742.5088">getTokenFromAuthorizationCode(clientId, clientSecret, authorizationCode, redirectUri, tokenUri)</text><polygon fill="#181818" points="1426.189,775.0625,1416.189,779.0625,1426.189,783.0625,1422.189,779.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1420.189" x2="2063.4277" y1="779.0625" y2="779.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1432.189" y="773.7998">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.6626" x="1450.6489" y="773.7998">oauthToken</text><polygon fill="#181818" points="753.1899,806.3535,743.1899,810.3535,753.1899,814.3535,749.1899,810.3535" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747.1899" x2="1404.189" y1="810.3535" y2="810.3535"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="759.1899" y="805.0908">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.2598" x="777.6499" y="805.0908">validateToken(oauthToken)</text><polygon fill="#181818" points="1398.189,837.6445,1408.189,841.6445,1398.189,845.6445,1402.189,841.6445" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.1899" x2="1404.189" y1="841.6445" y2="841.6445"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="749.1899" y="836.3818">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.2598" x="767.6499" y="836.3818">validateToken(oauthToken)</text><polygon fill="#181818" points="2047.4277,868.9355,2057.4277,872.9355,2047.4277,876.9355,2051.4277,872.9355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1420.189" x2="2053.4277" y1="872.9355" y2="872.9355"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1427.189" y="867.6729">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.3252" x="1445.6489" y="867.6729">getUserInfo(oauthToken, userInfoUri)</text><polygon fill="#181818" points="1431.189,900.2266,1421.189,904.2266,1431.189,908.2266,1427.189,904.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1425.189" x2="2063.4277" y1="904.2266" y2="904.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="1437.189" y="898.9639">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.7935" x="1455.6489" y="898.9639">userInfo (username, name)</text><polygon fill="#181818" points="753.1899,931.5176,743.1899,935.5176,753.1899,939.5176,749.1899,935.5176" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747.1899" x2="1404.189" y1="935.5176" y2="935.5176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="759.1899" y="930.2549">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.7935" x="777.6499" y="930.2549">userInfo (username, name)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2615.6919" x="0" y="965.1631"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2615.6919" y1="965.1631" y2="965.1631"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2615.6919" y1="968.1631" y2="968.1631"/><rect fill="#EEEEEE" height="25.291" style="stroke:#000000;stroke-width:2.0;" width="209.0825" x="1203.3047" y="953.5176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="191.4707" x="1209.3047" y="971.5459">Step 3: Retrieve or Create User</text><polygon fill="#181818" points="2399.4473,1008.0996,2409.4473,1012.0996,2399.4473,1016.0996,2403.4473,1012.0996" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.1899" x2="2405.4473" y1="1012.0996" y2="1012.0996"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="749.1899" y="1006.8369">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.5635" x="767.6499" y="1006.8369">findByUsername(username)</text><path d="M647.4834,1027.0996 L707.6543,1027.0996 L707.6543,1036.3906 L697.6543,1046.3906 L647.4834,1046.3906 L647.4834,1027.0996 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="129.7949" style="stroke:#000000;stroke-width:1.5;" width="1824.0845" x="647.4834" y="1027.0996"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="15.1709" x="662.4834" y="1042.1279">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86.1631" x="722.6543" y="1040.9697">[If user is found]</text><polygon fill="#181818" points="753.1899,1065.6816,743.1899,1069.6816,753.1899,1073.6816,749.1899,1069.6816" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747.1899" x2="2415.4473" y1="1069.6816" y2="1069.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="759.1899" y="1064.4189">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25.2891" x="777.6499" y="1064.4189">user</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="647.4834" x2="2471.5679" y1="1078.6816" y2="1078.6816"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="106.3208" x="652.4834" y="1090.5518">[If user is not found]</text><polygon fill="#181818" points="2399.4473,1113.6035,2409.4473,1117.6035,2399.4473,1121.6035,2403.4473,1117.6035" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.1899" x2="2405.4473" y1="1117.6035" y2="1117.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="749.1899" y="1112.3408">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309.2261" x="767.6499" y="1112.3408">createIam(CreateIamUserRequest(username, name))</text><polygon fill="#181818" points="753.1899,1144.8945,743.1899,1148.8945,753.1899,1152.8945,749.1899,1148.8945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747.1899" x2="2415.4473" y1="1148.8945" y2="1148.8945"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="759.1899" y="1143.6318">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.3945" x="777.6499" y="1143.6318">iamUser</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="2615.6919" x="0" y="1185.54"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2615.6919" y1="1185.54" y2="1185.54"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="2615.6919" y1="1188.54" y2="1188.54"/><rect fill="#EEEEEE" height="25.291" style="stroke:#000000;stroke-width:2.0;" width="151.979" x="1231.8564" y="1173.8945"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="134.3672" x="1237.8564" y="1191.9229">Step 4: Generate JWT</text><polygon fill="#181818" points="2550.9092,1228.4766,2560.9092,1232.4766,2550.9092,1236.4766,2554.9092,1232.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.1899" x2="2556.9092" y1="1232.4766" y2="1232.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="749.1899" y="1227.2139">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.8735" x="767.6499" y="1227.2139">generateJwt(iamUser)</text><polygon fill="#181818" points="753.1899,1259.7676,743.1899,1263.7676,753.1899,1267.7676,749.1899,1263.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747.1899" x2="2566.9092" y1="1263.7676" y2="1263.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="759.1899" y="1258.5049">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.019" x="777.6499" y="1258.5049">jwtToken</text><polygon fill="#181818" points="465.854,1291.0586,455.854,1295.0586,465.854,1299.0586,461.854,1295.0586" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="459.854" x2="726.1899" y1="1295.0586" y2="1295.0586"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="471.854" y="1289.7959">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.019" x="490.314" y="1289.7959">jwtToken</text><polygon fill="#181818" points="305.0396,1322.3496,295.0396,1326.3496,305.0396,1330.3496,301.0396,1326.3496" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="299.0396" x2="448.854" y1="1326.3496" y2="1326.3496"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="311.0396" y="1321.0869">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.019" x="329.4995" y="1321.0869">jwtToken</text><polygon fill="#181818" points="60.9653,1353.6406,50.9653,1357.6406,60.9653,1361.6406,56.9653,1357.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54.9653" x2="293.0396" y1="1357.6406" y2="1357.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14.46" x="66.9653" y="1352.3779">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.3989" x="85.4253" y="1352.3779">jwtToken (Login successful)</text><!--SRC=[fLPRRzCm57xthpZg2udMQUBo5Ab8fMAGQGX4D_7i9IUTcMC7n-aOlnvVajIvj4LYaoRRvpktxtnsHXijQQRPdce4AGWrUz6K3wW8qKnpX7Jz1TQDVaIXMKOramAUcNw4JrBkZ9cA7AvfXWzIFa7qyRT69IY73UNyWMPFCI4cl5ImM0ifNahPr0kWDVGxKb5b0hEA2WsBPFjIQomTn2-7Tbl8HWgj9EUe76oZ5P-23jLkKUrPXZwaNm_XAIs77WxQdgR2D5JGiOzltWBWgc_VRftlDoNtB4ULbjMejAyMynbvrHOVx3kUUWfz_n2rH1_onCwrmytHT5-Z2liEzbDWZnYQRdxSmPryGa-7sRb9Ug4SfaTMAzXghE1r0WfpfZ3JTx8Z88fXjIAaXyFb-xQj15B1D3F1Qk1onmQYkkew9Iq7nisEUJu58TRcGliM4zYXjiHAnVwuYTuhRd2jsIB7qptcGiP0wnoEDu6ZKZWMyfKPdQ4untmE0IMQWnmC8rMR1vX9XAKHg0FL92p05XIeQBuHEZfOmkY4BI7Zp6H8ysLFiZl6aZA-pMI5S04BytjXwoeOHtSOao0vN4xO6MSce-B3gKsm_S3w-KyWVlI1hAP1MWaPJA_3kRew8Rz9OFAAUN4EQ8MDp76gxk6jJE1MxcexopsZ4t4FiGUHFnfnSEnuwceO3j5cdrE-zxsrD-gKuychu6ESpFi_r-9y-7FwTi_IjPBbUkmR7LJiLrlC5EgHtYro97DjGvhLEJrB6yZb9vCo-o7iAMUvUTeSBZgu37WVnZtkSeuC-tAdef21qnAQzl0VEkgW4DcLeAMXnlwDJrtL4qxTFNgRm7VKYk7U_6EXOAFGVZbijUxM14m4NwS42YRo3o_tRTG-V4merv0MBZEm6WhPY9o0-GdSfqKIv3M6VaBgmFTO5PchrgWysdGhQ_-ElngizRZf-7GTp3iJD4bxUjwPAu82bIN5Vcf7d9WZErqFk7dMKHia9XOy2F_pMRU2dBwNlMtoJlQM-VUnCqFatXAecop3kYuQ7fE_]--></g></svg>